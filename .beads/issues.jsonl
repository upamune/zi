{"id":"zi-2tw","title":"Implement TUI with pi-tui","description":"Create src/tui/index.ts with:\n- Use @mariozechner/pi-tui\n- Header component (session info, model, tokens)\n- Message area with markdown rendering\n- Editor component for input\n- Footer status line\n- Integration with Agent","status":"closed","priority":1,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:30.722415575+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:46:55.39527528+09:00","closed_at":"2026-02-14T14:46:55.39527528+09:00","close_reason":"Closed"}
{"id":"zi-397","title":"Implement read tool via Just Bash","description":"Create src/tools/read.ts with:\n- read(path, offset?, limit?) function\n- Uses cat/sed via Just Bash\n- Logs to AgentFS\n- Returns file contents","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:13.15241259+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:18:37.504485984+09:00","closed_at":"2026-02-14T14:18:37.504485984+09:00","close_reason":"Closed"}
{"id":"zi-39v","title":"Implement bash tool via Just Bash","description":"Create src/tools/bash.ts with:\n- bash(command) function\n- Uses Just Bash with AgentFS backend\n- Logs command and result\n- Returns stdout, stderr, exitCode","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:17.38513252+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:25:08.986713785+09:00","closed_at":"2026-02-14T14:25:08.986713785+09:00","close_reason":"Closed"}
{"id":"zi-91e","title":"Add abort/cancellation support","description":"Cannot cancel a running prompt:\n- Add AbortController support to Agent.prompt()\n- Pass abort signal to streamText\n- Handle abort in tool execution\n- Expose abort method on Agent class","status":"open","priority":2,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:38.371294428+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:14:38.371294428+09:00"}
{"id":"zi-bmg","title":"Implement LLM Provider abstraction","description":"Create src/agent/provider.ts with:\n- LLMProvider interface\n- Support for Anthropic, OpenAI, Kimi providers\n- Use Vercel AI SDK (ai package)\n- streamText integration","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:01.524985956+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:12:54.790101583+09:00","closed_at":"2026-02-14T14:12:54.790101583+09:00","close_reason":"Closed"}
{"id":"zi-d06","title":"Implement CLI argument parsing","description":"Create src/cli.ts with:\n- Parse command line arguments\n- Support: -c (continue), -r (resume), --provider, --model, --no-session\n- Interactive mode\n- Print mode (-p)\n- Help display","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:32.813228799+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:33:35.567526614+09:00","closed_at":"2026-02-14T14:33:35.567526614+09:00","close_reason":"Closed"}
{"id":"zi-dkx","title":"Integrate TUI into main entry point","description":"Currently src/index.ts only has print mode. Need to:\n- Add interactive mode (default when no --print flag)\n- Start TUI when in interactive mode\n- Pass session/model/provider info to TUI\n- Handle TUI lifecycle (start/stop)\n- Allow switching between print and interactive modes","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:38.369488047+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:37:35.335208769+09:00","closed_at":"2026-02-14T15:37:35.335208769+09:00","close_reason":"Closed"}
{"id":"zi-drd","title":"Add Agent core tests","description":"Create test/agent.test.ts:\n- Agent constructor with options\n- prompt() returns AgentResponse with content\n- prompt() handles streaming\n- prompt() executes tool calls and returns results\n- prompt() retries on error\n- prompt() throws after max retries\n- getMessages(), clearMessages()\nReference: z/pi-mono/packages/agent/test/agent.test.ts","status":"closed","priority":1,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:18.757551185+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:43:30.870905098+09:00","closed_at":"2026-02-14T15:43:30.870905098+09:00","close_reason":"Closed"}
{"id":"zi-dxb","title":"Implement write tool via AgentFS","description":"Create src/tools/write.ts with:\n- write(path, content) function\n- Uses AgentFS SDK directly (avoids escape issues)\n- Creates parent directories\n- Logs to AgentFS","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:14.263190802+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:20:45.580338902+09:00","closed_at":"2026-02-14T14:20:45.580338902+09:00","close_reason":"Closed"}
{"id":"zi-dyx","title":"Add Tool Registry tests","description":"Create test/tool-registry.test.ts:\n- createToolRegistry() registers all 4 tools\n- get() returns tool by name\n- get() returns undefined for unknown tool\n- getAll() returns map of all tools\n- register() adds/overwrites tool","status":"in_progress","priority":1,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:18.76061269+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:43:36.335120704+09:00"}
{"id":"zi-fh0","title":"Add --version/-v flag to CLI","description":"printVersion() exists in cli.ts but is not wired up:\n- Add version option to parseCliArgs()\n- Call printVersion() and exit when flag is present\n- Test the version flag works","status":"open","priority":1,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:38.373134479+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:14:38.373134479+09:00"}
{"id":"zi-fh8","title":"Implement edit tool","description":"Create src/tools/edit.ts with:\n- edit(path, oldText, newText) function\n- Reads via Just Bash\n- TypeScript replacement (exact match)\n- Writes via AgentFS\n- Validates unique match\n- Returns diff","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:15.909030642+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:23:17.395621571+09:00","closed_at":"2026-02-14T14:23:17.395621571+09:00","close_reason":"Closed","dependencies":[{"issue_id":"zi-fh8","depends_on_id":"zi-397","type":"blocks","created_at":"2026-02-14T13:50:29.661913229+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-fh8","depends_on_id":"zi-dxb","type":"blocks","created_at":"2026-02-14T13:50:29.708246207+09:00","created_by":"Yu SERIZAWA"}]}
{"id":"zi-geg","title":"Implement Config management module","description":"Create src/config/index.ts with:\n- Config interface (provider, model, thinking)\n- loadConfig() function\n- saveConfig() function\n- Support for global (~/.zi/settings.json) and project (.zi/settings.json) configs","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:48:53.491125774+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:05:00.308677729+09:00","closed_at":"2026-02-14T14:05:00.308677729+09:00","close_reason":"Closed"}
{"id":"zi-hm0","title":"Wire everything together in entry point","description":"Update src/index.ts and src/cli.ts to:\n- Initialize config\n- Create session\n- Initialize provider\n- Set up tools\n- Create agent\n- Start TUI or print mode","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:40.776473132+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:36:33.306836373+09:00","closed_at":"2026-02-14T14:36:33.306836373+09:00","close_reason":"Closed","dependencies":[{"issue_id":"zi-hm0","depends_on_id":"zi-geg","type":"blocks","created_at":"2026-02-14T13:49:59.525839061+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-hm0","depends_on_id":"zi-bmg","type":"blocks","created_at":"2026-02-14T13:49:59.571003286+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-hm0","depends_on_id":"zi-j1z","type":"blocks","created_at":"2026-02-14T13:49:59.616866599+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-hm0","depends_on_id":"zi-uzd","type":"blocks","created_at":"2026-02-14T13:49:59.663452219+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-hm0","depends_on_id":"zi-ymy","type":"blocks","created_at":"2026-02-14T13:49:59.709875658+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-hm0","depends_on_id":"zi-d06","type":"blocks","created_at":"2026-02-14T13:49:59.756834463+09:00","created_by":"Yu SERIZAWA"}]}
{"id":"zi-j1z","title":"Implement Session management with AgentFS","description":"Create src/agent/session.ts with:\n- Session interface (fs, kv, tools, id, path)\n- Session.create() - Creates new .db file\n- Session.load(id) - Loads existing session\n- Integration with agentfs-sdk\n- Session storage at .zi/sessions/{id}.db","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:07.628153561+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:15:04.118759882+09:00","closed_at":"2026-02-14T14:15:04.118759882+09:00","close_reason":"Closed"}
{"id":"zi-kmn","title":"Implement tool result feedback loop in Agent","description":"Currently tool results are captured but not fed back to LLM:\n- After executing tool calls, add results to messages\n- Continue streaming until no more tool calls\n- Support multi-turn tool execution\n- Add max tool call iterations to prevent infinite loops","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:38.371976876+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:39:52.253852867+09:00","closed_at":"2026-02-14T15:39:52.253852867+09:00","close_reason":"Closed"}
{"id":"zi-m9f","title":"Add Config module tests","description":"Create test/config.test.ts:\n- loadConfig() with no config files (defaults)\n- loadConfig() with global config only\n- loadConfig() with project config only\n- loadConfig() with both configs (merge priority)\n- saveConfig() to global/project scope\n- ZI_DIR environment variable override\n- getGlobalConfigDir(), getProjectConfigPath()\n- Invalid JSON handling","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:18.756942338+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:27:58.733549592+09:00","closed_at":"2026-02-14T15:27:58.733549592+09:00","close_reason":"Closed"}
{"id":"zi-mhx","title":"Add unit tests for tools","description":"Create tests for:\n- read tool\n- write tool\n- edit tool (including error cases)\n- bash tool\n- Use Bun test runner","status":"closed","priority":1,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:42.383586982+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:52:30.794500317+09:00","closed_at":"2026-02-14T14:52:30.794500317+09:00","close_reason":"Closed","dependencies":[{"issue_id":"zi-mhx","depends_on_id":"zi-397","type":"blocks","created_at":"2026-02-14T13:50:05.387764683+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-mhx","depends_on_id":"zi-dxb","type":"blocks","created_at":"2026-02-14T13:50:05.433947849+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-mhx","depends_on_id":"zi-fh8","type":"blocks","created_at":"2026-02-14T13:50:05.48147475+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-mhx","depends_on_id":"zi-39v","type":"blocks","created_at":"2026-02-14T13:50:05.528683818+09:00","created_by":"Yu SERIZAWA"}]}
{"id":"zi-pbm","title":"Add Provider tests","description":"Create test/provider.test.ts:\n- createAnthropicProvider() returns LLMProvider\n- createOpenAIProvider() returns LLMProvider\n- createKimiProvider() with correct baseURL\n- createProvider() switches on config.provider\n- createProvider() throws for unknown provider","status":"open","priority":1,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:18.76148617+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:14:18.76148617+09:00"}
{"id":"zi-uzd","title":"Implement Tool registry","description":"Create src/tools/index.ts with:\n- Tool interface definition\n- ToolRegistry class\n- Register and retrieve tools\n- Integration with all 4 tools (read, write, edit, bash)","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:26.117060715+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:26:17.20890382+09:00","closed_at":"2026-02-14T14:26:17.20890382+09:00","close_reason":"Closed","dependencies":[{"issue_id":"zi-uzd","depends_on_id":"zi-397","type":"blocks","created_at":"2026-02-14T13:50:14.811879807+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-uzd","depends_on_id":"zi-dxb","type":"blocks","created_at":"2026-02-14T13:50:14.857118942+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-uzd","depends_on_id":"zi-fh8","type":"blocks","created_at":"2026-02-14T13:50:14.902158926+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-uzd","depends_on_id":"zi-39v","type":"blocks","created_at":"2026-02-14T13:50:14.947088798+09:00","created_by":"Yu SERIZAWA"}]}
{"id":"zi-v8n","title":"Wire systemPrompt to streamText","description":"AgentConfig has systemPrompt but it's never used:\n- Pass systemPrompt to streamText() call\n- Support dynamic system prompts\n- Document system prompt usage","status":"open","priority":1,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:38.369025002+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:14:38.369025002+09:00"}
{"id":"zi-xa9","title":"Add Session management tests","description":"Create test/session.test.ts:\n- createSession() creates .zi/sessions/{id}.db\n- loadSession() loads existing session\n- loadSession() throws for non-existent session\n- sessionExists() returns correct boolean\n- listSessions() returns array of IDs\n- deleteSession() removes session file\n- Session interface (fs, kv, tools, close)","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:18.758411605+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:31:34.702669055+09:00","closed_at":"2026-02-14T15:31:34.702669055+09:00","close_reason":"Closed"}
{"id":"zi-y7p","title":"Add provider name validation in CLI","description":"Currently provider is cast without validation:\n- Validate provider is one of: anthropic, openai, kimi\n- Show error message for invalid provider\n- Exit with code 1 on validation failure","status":"open","priority":2,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:14:38.371522491+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:14:38.371522491+09:00"}
{"id":"zi-ymy","title":"Implement Agent core","description":"Create src/agent/index.ts with:\n- Agent class\n- prompt(message) method\n- executeTool() method\n- Stream LLM responses\n- Parse tool calls\n- Error handling and retries\n- Integration with provider, session, and tools","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T13:49:28.362846172+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T14:31:35.686697+09:00","closed_at":"2026-02-14T14:31:35.686697+09:00","close_reason":"Closed","dependencies":[{"issue_id":"zi-ymy","depends_on_id":"zi-j1z","type":"blocks","created_at":"2026-02-14T13:50:14.720312863+09:00","created_by":"Yu SERIZAWA"},{"issue_id":"zi-ymy","depends_on_id":"zi-bmg","type":"blocks","created_at":"2026-02-14T13:50:14.764827511+09:00","created_by":"Yu SERIZAWA"}]}
{"id":"zi-ziz","title":"Add CLI argument parsing tests","description":"Create test/cli.test.ts:\n- --version/-v flag\n- --help/-h flag\n- --print/-p flag\n- --continue/-c flag\n- --resume/-r flag (with and without ID)\n- --provider, --model flags\n- --no-session flag\n- positional prompt arguments\n- complex flag combinations\nReference: z/pi-mono/packages/coding-agent/test/args.test.ts","status":"closed","priority":0,"issue_type":"task","owner":"info@serizawa.me","created_at":"2026-02-14T15:13:38.118988846+09:00","created_by":"Yu SERIZAWA","updated_at":"2026-02-14T15:19:28.643536419+09:00","closed_at":"2026-02-14T15:19:28.643536419+09:00","close_reason":"Closed"}
