# Review Guidelines

## Language
- すべてのレビュー本文、要約、指摘コメントは日本語で記述してください。
- 既存の英語識別子（関数名、ファイル名、環境変数名、コマンド名）は原文のまま使ってください。
- 指摘がない場合も、日本語で「重大な指摘はありません」のように明記してください。

## Scope
- TypeScript/Bun の実装変更は、正しさ・安全性・保守性を優先して確認してください。
- 特に tool 実行まわり（read/write/edit/bash）のエラーハンドリングと監査ログ記録の欠落を重点的に見てください。
- セッション管理（`.xi/sessions/{id}.db`）や設定読み込みの変更は、後方互換性と破壊的変更の有無を確認してください。
- フォールバックや後方互換性を維持しようとして実装が過度に複雑化している場合は、簡素化余地として明確に指摘してください。

## Project Conventions
- コード規約は `AGENTS.md` を優先して参照してください。
- 公開関数の戻り値型、`type` import、例外メッセージの文脈情報が維持されているか確認してください。
- 変更がテスト要件に影響する場合、必要なテスト追加・更新があるかを指摘してください。

## Severity
- 指摘は `重大` / `中` / `軽微` の3段階で分類してください。
- `重大` は、バグ・データ破損・セキュリティ問題・明確な仕様逸脱に限定してください。

## Ignore
- 生成物や lockfile の差分は、依存関係や実行結果に影響がある場合のみ指摘してください。
- 表記ゆれのみで動作に影響しない軽微な文言差分は、過度に指摘しないでください。

## Output Format
- まず重要度順に指摘を列挙し、その後に全体サマリを短く記載してください。
- 各指摘には、対象ファイルパスと根拠（何が問題で、なぜ問題か）を含めてください。
